import { Box, Button, Input, Text, Grid, GridItem, CircularProgress, useToast } from "@chakra-ui/react";
import { useState } from "react";
import "../styles/home.scss";
import { dummyImagesList } from "../utils/constants";

export default function Home() {
    const toast = useToast()

	const [searchText, setSearchText] = useState("");
	const [isLoading, setIsLoading] = useState(false);

	const handleChange = (e) => {
		const { value } = e.target;
		setSearchText(value);
	};

    const handleSearch = () => {
        if(searchText === "") return toast({
            title: 'Fi',
            status: 'error',
            duration: 2000,
            isClosable: true,
          })
		setIsLoading(true);
		setTimeout(() => {
			setIsLoading(false);
		}, 4000);
	};

	return (
		<Box className="home-page">
			<Text fontSize="xl" as="b">
				Look what the community is up to.
			</Text>
			<Text fontSize="md" color="gray">
				Explore a collection of imaginative and visually stunning images
				generated by DALL-E AI
			</Text>

			<Box className="search-box">
				<Input
					width={"50%"}
					className="search-input"
					placeholder="Search here..."
					onChange={handleChange}
					value={searchText}
				/>
				<Button colorScheme="teal" onClick={handleSearch}>
					Search
				</Button>
			</Box>

			<Box className="images-list">
				<RenderImages isLoading={isLoading} />
			</Box>
			{/* <IconButton
				className="btn-back-to-top"
				aria-label="Search database"
				onClick={() => window.scrollTo({ top: 0, behavior: "smooth" })}
				icon={<TriangleUpIcon />}
			/> */}
		</Box>
	);
}

const RenderImages = ({ isLoading = false }) => {
	if (isLoading)
		return (
			<Box
				w={"100%"}
				display="flex"
				justifyContent="center"
				alignItems="center"
			>
				<CircularProgress isIndeterminate color="green.300" />
			</Box>
		);
	return (
		<Grid templateColumns="repeat(3, 1fr)" gap={2}>
			{dummyImagesList.map((src) => {
				return (
					<GridItem w="100%">
						<img src={src} />
					</GridItem>
				);
			})}
		</Grid>
	);
};
